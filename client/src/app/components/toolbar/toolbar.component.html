<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<ng-keyboard-shortcuts [shortcuts]="shortcuts"></ng-keyboard-shortcuts>

<div class="btns">
    <button (click)="this.toolManager.clearArrays()" matTooltip="Créer un nouveau dessin" matTooltipPosition="after" matTooltipShowDelay="600">
        <fa-icon [icon]="faPlusSquare" size="lg"></fa-icon>
    </button>

    <button (click)="openSaveDrawingForm()" matTooltip="Sauvegarder le dessin" matTooltipPosition="after" matTooltipShowDelay="600">
        <fa-icon [icon]="faSave" size="lg"></fa-icon>
    </button>

    <button (click)="openCarousel()" matTooltip="Ouvrir le carrousel de dessins" matTooltipPosition="after" matTooltipShowDelay="600">
        <fa-icon [icon]="faImages" size="lg"></fa-icon>
    </button>
    <button (click)="export()" matTooltip="Exporter le dessin" matTooltipPosition="after" matTooltipShowDelay="600">
        <fa-icon [icon]="faDownload" size="lg"></fa-icon>
    </button>

    <button
        (click)="this.toolManager.setTool(this.toolManager.pencilService); updateSliderWidth()"
        matTooltip="Outil crayon (C): Cliquer et glisser pour dessiner. Cliquez ici pour voir plus d'options"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faPen" size="lg"></fa-icon>
    </button>
    <button
        (click)="this.toolManager.setTool(this.toolManager.airbrushService)"
        matTooltip="Outil aérosol (A): Cliquer et glisser pour dessiner. Cliquez ici pour voir plus d'options"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faSprayCan" size="lg"></fa-icon>
    </button>
    <button
        (click)="this.toolManager.setTool(this.toolManager.eraserService); updateSliderWidth()"
        matTooltip="Outil efface (E): Cliquer et glisser pour effacer. Cliquez ici pour voir plus d'options"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faEraser" size="lg"></fa-icon>
    </button>
    <button
        (click)="this.toolManager.setTool(this.toolManager.lineService); updateSliderWidth()"
        matTooltip="Outil ligne (L): Cliquer et glisser pour déssiner une ligne. Cliquer à la fin pour enchaîner
    les lignes, double-cliquer pour terminer la ligne. Cliquez ici pour voir plus d'options"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faSlash" size="lg"></fa-icon>
    </button>
    <button
        (click)="this.toolManager.setTool(this.toolManager.rectangleService); updateSliderWidth()"
        matTooltip="Outil rectangle (1): Cliquer et glisser, et relâcher pour déssiner un rectangle. tenir (Shift) pour dessiner un carré. Cliquez ici pour voir plus d'options"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faSquare" size="lg"></fa-icon>
    </button>

    <mat-button-toggle-group *ngIf="this.toolManager.currentTool == this.toolManager.rectangleService">
        <mat-button-toggle value="1" (change)="setRectangleStyle($event.value)">Remplir</mat-button-toggle>
        <mat-button-toggle value="2" (change)="setRectangleStyle($event.value)">Contour</mat-button-toggle>
        <mat-button-toggle value="3" (change)="setRectangleStyle($event.value)">Les Deux</mat-button-toggle>
    </mat-button-toggle-group>

    <button
        (click)="this.toolManager.setTool(this.toolManager.ellipseService); updateSliderWidth()"
        matTooltip="Outil ellipse (2): Cliquer et glisser, et relâcher pour déssiner un ellipse. tenir (Shift) pour dessiner un cercle. Cliquez ici pour voir plus d'options"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faCircle" size="lg"></fa-icon>
    </button>

    <button (click)="this.toolManager.setTool(this.toolManager.rectangleSelection)">Selection</button>
    <mat-button-toggle-group
        *ngIf="
            this.toolManager.currentTool == this.toolManager.rectangleSelection || this.toolManager.currentTool == this.toolManager.ellipseSelection
        "
    >
        <mat-button-toggle value="1" (change)="this.toolManager.setTool(this.toolManager.rectangleSelection)">Rectangle</mat-button-toggle>
        <mat-button-toggle value="2" (change)="this.toolManager.setTool(this.toolManager.ellipseSelection)">Ellipse</mat-button-toggle>
        <mat-button-toggle (change)="this.toolManager.rectangleSelection.selectAll(); this.toolManager.setTool(this.toolManager.rectangleSelection)"
            >Tout selectionner</mat-button-toggle
        >
    </mat-button-toggle-group>

    <button (click)="this.toolManager.setTool(this.toolManager.polygonService); updateSliderWidth(); this.toolManager.polygonService.onButtonPress()">
        Poly
    </button>
    <div *ngIf="this.toolManager.polygonService.showNumberOfSidesInput" class="Slider">
        <mat-card>
            <div>Nb côté:</div>
            <mat-slider
                min="3"
                max="12"
                step="1"
                class="slider"
                (change)="this.toolManager.polygonService.setNumberOfSides($event)"
                (input)="this.toolManager.polygonService.sides = $event.value"
                [value]="this.toolManager.polygonService.sides"
            ></mat-slider>
            <mat-card-subtitle>{{ this.toolManager.polygonService.sides }}</mat-card-subtitle>
        </mat-card>
    </div>

    <mat-button-toggle-group *ngIf="this.toolManager.currentTool == this.toolManager.ellipseService">
        <mat-button-toggle value="1" (change)="setEllipseStyle($event.value)">Remplir</mat-button-toggle>
        <mat-button-toggle value="2" (change)="setEllipseStyle($event.value)">Contour</mat-button-toggle>
        <mat-button-toggle value="3" (change)="setEllipseStyle($event.value)">Les Deux</mat-button-toggle>
    </mat-button-toggle-group>

    <button
        (click)="onPressPalette()"
        matTooltip="Palette de couleur: Sélectionnez une couleur. CLIQUE-GAUCHE pour couleur principale et CLIQUE-DROIT pour couleur secondaire 
    (ceci s'applique pour les 10 couleurs utilisés précédemment). 
    Cliquez ici pour plus d'options."
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faPalette" size="lg"></fa-icon>
    </button>
    <button
        class=""
        (click)="this.toolManager.setTool(this.toolManager.pipetteService)"
        matTooltip="Outil pipette (I): CLIQUE-GAUCHE pour couleur principale et CLIQUE-DROIT pour couleur secondaire"
        matTooltipPosition="after"
        matTooltipShowDelay="600"
    >
        <fa-icon [icon]="faEyeDropper" size="lg"></fa-icon>
    </button>

    <div *ngIf="this.toolManager.showPalette">
        <app-color-picker></app-color-picker>
        <!-- calls color picker component html -->
    </div>

    <div class="Slider" *ngIf="this.toolManager.currentTool != this.toolManager.airbrushService">
        <mat-card>
            Épaisseur:
            <mat-slider
                min="1"
                max="50"
                step="1"
                value="1"
                class="slider"
                (change)="changeWidth($event.value)"
                (input)="this.toolManager.widthValue = $event.value"
                [value]="this.toolManager.widthValue"
            ></mat-slider>
            <mat-card-subtitle>{{ this.toolManager.widthValue }} </mat-card-subtitle>
        </mat-card>
    </div>

    <mat-button-toggle-group *ngIf="this.toolManager.currentTool == this.toolManager.polygonService">
        <mat-button-toggle value="1" (change)="setPolygonStyle($event.value)">Remplir</mat-button-toggle>
        <mat-button-toggle value="2" (change)="setPolygonStyle($event.value)">Contour</mat-button-toggle>
        <mat-button-toggle value="3" (change)="setPolygonStyle($event.value)">Les Deux</mat-button-toggle>
    </mat-button-toggle-group>

    <mat-button-toggle-group *ngIf="this.toolManager.currentTool == this.toolManager.lineService">
        <mat-button-toggle id="jonc" value="0" (change)="setLineJunction($event.value)">Sans jonction</mat-button-toggle>
        <mat-button-toggle id="jonc" value="1" (change)="setLineJunction($event.value)">Avec jonction</mat-button-toggle>
    </mat-button-toggle-group>

    <app-pipette *ngIf="this.toolManager.currentTool == this.toolManager.pipetteService"></app-pipette>

    <br />
    <div class="junctionRadiusSlider" *ngIf="this.toolManager.currentTool == this.toolManager.lineService">
        <mat-card
            >Diamètre:
            <mat-slider
                min="2"
                max="50"
                step="1"
                value="this.toolManager.lineService.currentDiameter"
                class="slider"
                (change)="changeDiameter($event.value)"
                (input)="this.toolManager.lineService.currentDiameter = $event.value"
                [value]="this.toolManager.lineService.currentDiameter"
            ></mat-slider>
            {{ this.toolManager.lineService.currentDiameter }}
            <br />
        </mat-card>
    </div>

    <div class="Slider" *ngIf="this.toolManager.currentTool == this.toolManager.airbrushService">
        <mat-card>
            Nombre d'émissions / sec:
            <mat-slider
                min="100"
                max="900"
                step="200"
                value="1"
                class="slider"
                (change)="changeEmissionRate($event.value)"
                (input)="this.toolManager.airbrushService.emissionRate = $event.value"
                [value]="this.toolManager.airbrushService.emissionRate"
            ></mat-slider>
            <mat-card-subtitle>{{ this.toolManager.airbrushService.emissionRate }} </mat-card-subtitle>
        </mat-card>
        <mat-card>
            Diamètre du jet:
            <mat-slider
                min="10"
                max="100"
                step="10"
                value="1"
                class="slider"
                (change)="changeJetDiameter($event.value)"
                (input)="this.toolManager.airbrushService.jetDiameter = $event.value"
                [value]="this.toolManager.airbrushService.jetDiameter"
            ></mat-slider>
            <mat-card-subtitle>{{ this.toolManager.airbrushService.jetDiameter }} px</mat-card-subtitle>
        </mat-card>
        <mat-card>
            Diamètre des gouttelettes:
            <mat-slider
                min="0.1"
                max="3"
                step="0.1"
                value="1"
                class="slider"
                (change)="changeDropletDiameter($event.value)"
                (input)="this.toolManager.airbrushService.dropletDiameter = $event.value"
                [value]="this.toolManager.airbrushService.dropletDiameter"
            ></mat-slider>
            <mat-card-subtitle>{{ this.toolManager.airbrushService.dropletDiameter }} px</mat-card-subtitle>
        </mat-card>
    </div>
</div>
