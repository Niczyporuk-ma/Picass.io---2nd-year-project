<form [formGroup]="exportForm" name="exportForm">
    <mat-form-field MatFormFieldControl="fileNameControl">
        <mat-label>Nom du fichier </mat-label>
        <input
            matInput
            name="drawingTitle"
            autocomplete="off"
            [formControl]="fileNameControl"
            (focus)="disableShortcut()"
            (blur)="enableShortcut()"
        />
        <!-- TODO: COMPLETE INPUT VALIDATION -->
        <mat-error *ngIf="fileNameControl.invalid && fileNameControl.touched">Nom invalide!</mat-error>
    </mat-form-field>

    <h3>Choisissez le format qui vous convient le plus</h3>

    <mat-form-field>
        <mat-label>Format de fichier</mat-label>
        <mat-select [formControl]="fileExtentionControl">
            <mat-option value="jpeg">JPG</mat-option>
            <mat-option value="png">PNG</mat-option>
        </mat-select>
    </mat-form-field>
    <div>
        <h3>Embellissez votre création un des nos filtres!</h3>
        <mat-radio-group (change)="applyFilter()" [formControl]="filterControl">
            <mat-radio-button value="none"> aucun filtre </mat-radio-button>
            <mat-radio-button value="blur(4px)"> embrouilllage </mat-radio-button>
            <mat-radio-button value="grayscale(100)"> gris </mat-radio-button>
            <mat-radio-button value="sepia(100%)"> sepia </mat-radio-button>
            <mat-radio-button value="hue-rotate(90deg)">inversion des couleurs </mat-radio-button>
            <mat-radio-button value="opacity(50%)">opacité</mat-radio-button>
        </mat-radio-group>
    </div>

    <canvas #filterPreviewCanvas [width]="600" [height]="480"></canvas>

    <a #downloadLink href="" download=""> </a>

    <button #cancel mat-raised-button color="accent" mat-dialog-close>Annuler</button>
    <button (click)="ExportDrawing()" mat-raised-button color="primary" mat-dialog-close>Exporter votre dessin</button>
</form>
